(()=>{"use strict";var t={800:(t,e,n)=>{n.d(e,{Z:()=>l});var r=n(645),a=n.n(r),i=n(667),c=n.n(i),o=n(344),s=a()((function(t){return t[1]})),d=c()(o);s.push([t.id,"body{background-color:#73552e}.car_changes{display:flex}.car_control{display:flex}.distancy{display:flex;width:100%;justify-content:space-evenly;border-bottom:1px dashed #000}.finish-line{display:flex;margin-left:auto;margin-right:100px}.car-img{width:100px;height:50px}.car-img>svg{position:relative}.finish-line{width:50px;height:50px;background:url("+d+") 0 0/contain no-repeat}.select_page{display:flex}.creating-car{display:flex}.change-car{display:flex;pointer-events:none;opacity:.3}.win_table{vertical-align:middle;text-align:center}.wins_table{cursor:pointer}.time_table{cursor:pointer}.activ_filter{border:2px solid #02c4ff}.win_massage{position:absolute;top:150px;left:40vw}.table-section{display:none}.car-race{margin:150px 0 0 0}.disable-change{pointer-events:none;opacity:.3}.activ-change{pointer-events:all;opacity:1}",""]);const l=s},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(a[c]=!0)}for(var o=0;o<t.length;o++){var s=[].concat(t[o]);r&&a[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),e.push(s))}},e}},667:t=>{t.exports=function(t,e){return e||(e={}),"string"!=typeof(t=t&&t.__esModule?t.default:t)?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},379:(t,e,n)=>{var r,a=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),i=[];function c(t){for(var e=-1,n=0;n<i.length;n++)if(i[n].identifier===t){e=n;break}return e}function o(t,e){for(var n={},r=[],a=0;a<t.length;a++){var o=t[a],s=e.base?o[0]+e.base:o[0],d=n[s]||0,l="".concat(s," ").concat(d);n[s]=d+1;var u=c(l),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(i[u].references++,i[u].updater(h)):i.push({identifier:l,updater:m(h,e),references:1}),r.push(l)}return r}function s(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var c=a(t.insert||"head");if(!c)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");c.appendChild(e)}return e}var d,l=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join("\n")});function u(t,e,n,r){var a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=l(e,a);else{var i=document.createTextNode(a),c=t.childNodes;c[e]&&t.removeChild(c[e]),c.length?t.insertBefore(i,c[e]):t.appendChild(i)}}function h(t,e,n){var r=n.css,a=n.media,i=n.sourceMap;if(a?t.setAttribute("media",a):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var f=null,p=0;function m(t,e){var n,r,a;if(e.singleton){var i=p++;n=f||(f=s(e)),r=u.bind(null,n,i,!1),a=u.bind(null,n,i,!0)}else n=s(e),r=h.bind(null,n,e),a=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else a()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=o(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var a=c(n[r]);i[a].references--}for(var s=o(t,e),d=0;d<n.length;d++){var l=c(n[d]);0===i[l].references&&(i[l].updater(),i.splice(l,1))}n=s}}}},344:(t,e,n)=>{t.exports=n.p+"b793aede5e9ca81c43e4.svg"}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.nc=void 0;var r={};(()=>{n.d(r,{X:()=>C});var t=n(379),e=n.n(t),a=n(800);e()(a.Z,{insert:"head",singleton:!1}),a.Z.locals;const i={urlPath:"http://127.0.0.1:3000",allCarGarage:"/garage",limitCar:"?_limit=",status:"/engine?id=",startMovement:"&status=started",drive:"&status=drive",stopMovement:"&status=stopped",canWin:!1,pageNumber:0,carInGarage:0,raceWidth:[]},c={showWinners:"/winners",changeFilter:"time",arrow:"up",winPageNumber:0,maxWinPage:0,winner:"",winListMemory:[],allCars:[]};function o(){const t=["Audi","BMW","Ford","Honda","Hyundai","Kia","Lada","Mazda","Mercedes-Benz","Mitsubishi","Nissan","Renault","Skoda","Toyota","Volkswagen","Acura","Tesla"],e=["Q5","E38","Mustang","Accord","Solaris","RIO","Granta,","CX-7","AMG","Lancer","Qashqai","Logan","Octavia","Corolla","Polo","NSX","Model S"],n=Math.floor(Math.random()*t.length),r=Math.floor(Math.random()*e.length),a=Math.floor(16777215*Math.random()).toString(16);return{name:`${t[n]} ${e[r]}`,color:`#${a}`}}var s=function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function c(t){try{s(r.next(t))}catch(t){i(t)}}function o(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,o)}s((r=r.apply(t,e||[])).next())}))};function d(){return s(this,void 0,void 0,(function*(){const t=yield fetch(`${i.urlPath}${i.allCarGarage}`),e=yield t.json();c.allCars=Object.assign([],e),i.carInGarage=e.length;const n=7*i.pageNumber;return e.splice(n,7)}))}var l=function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function c(t){try{s(r.next(t))}catch(t){i(t)}}function o(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,o)}s((r=r.apply(t,e||[])).next())}))};var u=function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function c(t){try{s(r.next(t))}catch(t){i(t)}}function o(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,o)}s((r=r.apply(t,e||[])).next())}))};function h(){return u(this,void 0,void 0,(function*(){const t=document.querySelector("#win-arr"),e=document.querySelector("#time-arr"),n=yield function(){return u(this,void 0,void 0,(function*(){document.querySelector("#winTable").innerHTML="";const t=yield fetch(`${i.urlPath}${i.allCarGarage}`),e=yield t.json(),n=yield fetch(`${i.urlPath}${c.showWinners}`),r=yield n.json();for(let t=0;t<r.length;t+=1)e.find((e=>e.id===r[t].id?Object.assign(r[t],e):0));return r}))}();c.maxWinPage=n.length,c.winListMemory=Object.assign([],n),"time"===c.changeFilter&&"up"===c.arrow?(n.sort(((t,e)=>Number(t.time)>Number(e.time)?1:-1)),e.textContent="↑",c.arrow="down"):"time"===c.changeFilter&&"down"===c.arrow?(n.sort(((t,e)=>Number(t.time)<Number(e.time)?1:-1)),e.textContent="↓",c.arrow="up"):"up"===c.arrow?(t.textContent="↓",n.sort(((t,e)=>Number(t.wins)>Number(e.wins)?-1:1)),c.arrow="down"):(t.textContent="↑",n.sort(((t,e)=>Number(t.wins)<Number(e.wins)?-1:1)),c.arrow="up"),function(t){const e=10*c.winPageNumber;return t.splice(e,10)}(n).forEach(((t,e)=>{var n,r;!function(){u(this,void 0,void 0,(function*(){document.querySelector("#winTable").insertAdjacentHTML("beforeend",'<tr> <td id="winPosition"></td> <td id="wimImg"><svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1280.000000 640.000000" id="car-mini-svg" preserveAspectRatio="xMidYMid meet"> <g transform="translate(0.000000,640.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none"> <path d="M3565 5336 c-106 -30 -101 -26 -108 -111 -4 -42 -9 -80 -12 -85 -6\r\n    -10 -246 -105 -590 -234 -448 -167 -1052 -415 -1173 -483 -78 -43 -193 -91\r\n    -250 -104 -23 -5 -98 -14 -165 -19 -67 -6 -167 -19 -222 -30 -154 -31 -340\r\n    -49 -563 -57 l-203 -6 -43 -66 c-59 -91 -60 -95 -26 -130 37 -37 38 -65 3\r\n    -150 -25 -62 -27 -78 -31 -256 l-4 -190 -38 -32 c-91 -78 -133 -209 -134 -418\r\n    0 -194 11 -396 26 -482 13 -71 14 -74 72 -122 69 -58 130 -129 158 -184 64\r\n    -126 534 -211 1384 -250 l92 -4 -6 119 c-6 142 8 256 49 383 112 352 394 622\r\n    756 722 90 26 112 28 278 28 165 0 188 -2 278 -27 201 -56 361 -152 504 -302\r\n    140 -145 222 -293 274 -492 21 -79 24 -109 23 -279 -1 -127 -6 -214 -16 -263\r\n    l-15 -73 3006 7 c1653 4 3007 8 3009 9 1 1 -8 37 -20 81 -19 67 -22 105 -22\r\n    259 -1 166 1 187 27 279 117 421 467 736 885 797 119 17 325 7 432 -21 239\r\n    -63 453 -205 601 -399 70 -92 154 -267 185 -386 24 -88 27 -119 27 -260 1\r\n    -116 -4 -181 -16 -234 -10 -41 -16 -75 -15 -76 2 -1 62 2 133 6 266 16 458 45\r\n    525 79 48 24 97 81 127 146 l24 52 -16 157 c-15 152 -15 163 4 284 63 388 50\r\n    680 -35 802 -134 193 -526 336 -1429 519 -737 149 -1322 209 -2033 210 -228 0\r\n    -226 0 -347 85 -187 131 -1045 607 -1471 815 -383 187 -788 281 -1439 332\r\n    -208 17 -1106 16 -1400 0 -121 -7 -314 -19 -430 -27 -302 -22 -286 -22 -341\r\n    10 -140 81 -187 94 -269 71z m1885 -333 c6 -37 38 -238 71 -446 32 -209 66\r\n    -422 75 -474 9 -52 15 -96 13 -97 -11 -9 -1699 29 -1951 44 -206 13 -417 36\r\n    -485 54 -98 26 -198 119 -249 231 -35 75 -36 172 -5 255 17 45 30 61 68 86 83\r\n    54 135 80 253 127 341 136 858 230 1460 267 269 16 270 16 511 18 l227 2 12\r\n    -67z m630 47 c264 -18 777 -110 1029 -186 186 -56 445 -188 756 -387 211 -134\r\n    274 -181 250 -185 -75 -12 -133 -50 -162 -106 -19 -35 -21 -136 -4 -179 l11\r\n    -27 -907 2 -906 3 -59 160 c-110 302 -298 878 -298 916 0 6 95 2 290 -11z"/> <path d="M2633 3125 c-223 -40 -410 -141 -568 -306 -132 -138 -213 -283 -262\r\n    -467 -22 -83 -26 -119 -26 -247 -1 -169 10 -236 65 -382 87 -230 271 -436 493\r\n    -551 85 -44 178 -78 271 -98 107 -23 312 -23 419 1 392 84 699 375 802 761 23\r\n    86 26 120 27 254 1 158 -5 199 -46 330 -98 310 -355 567 -668 669 -150 50\r\n    -354 64 -507 36z m350 -301 c249 -56 457 -247 543 -499 25 -72 28 -95 28 -220\r\n    1 -153 -15 -228 -74 -345 -94 -186 -283 -337 -485 -386 -96 -24 -268 -24 -360\r\n    0 -320 84 -544 355 -562 681 -20 359 209 673 558 765 94 24 253 26 352 4z"/> <path d="M2600 2697 c-36 -13 -85 -36 -109 -51 l-44 -28 116 -115 c81 -82 120\r\n    -114 131 -110 14 6 16 29 16 167 0 186 6 178 -110 137z"/> <path d="M2920 2561 c0 -139 2 -162 16 -168 11 -4 50 28 130 108 l115 114 -28\r\n    22 c-34 28 -138 70 -193 79 l-40 7 0 -162z"/> <path d="M2282 2448 c-28 -36 -92 -191 -92 -225 0 -10 34 -13 165 -13 151 0\r\n    165 1 165 18 0 15 -206 232 -221 232 -4 0 -11 -6 -17 -12z"/> <path d="M3222 2351 c-62 -59 -112 -115 -112 -124 0 -15 17 -17 165 -17 131 0\r\n    165 3 165 13 0 40 -69 205 -95 227 -7 6 -48 -27 -123 -99z"/> <path d="M2781 2332 c-12 -22 11 -62 34 -62 8 0 21 10 29 22 20 28 4 58 -29\r\n    58 -13 0 -29 -8 -34 -18z"/> <path d="M2749 2161 c-32 -33 -37 -67 -14 -110 29 -57 104 -64 151 -14 53 57\r\n    9 153 -71 153 -27 0 -44 -8 -66 -29z"/> <path d="M2570 2125 c-26 -32 13 -81 48 -59 24 16 27 45 6 61 -23 17 -39 16\r\n    -54 -2z"/> <path d="M3006 2124 c-20 -19 -20 -38 -2 -54 23 -19 61 -8 64 18 7 44 -32 67\r\n    -62 36z"/> <path d="M2190 1975 c0 -29 41 -140 72 -194 l31 -53 117 117 c71 71 116 123\r\n    113 131 -4 11 -40 14 -169 14 -141 0 -164 -2 -164 -15z"/> <path d="M3110 1972 c0 -9 51 -68 114 -131 l114 -114 31 54 c30 51 71 165 71\r\n    195 0 11 -31 14 -165 14 -151 0 -165 -1 -165 -18z"/> <path d="M2780 1901 c-7 -15 -5 -24 8 -41 32 -40 85 -4 62 41 -14 25 -56 25\r\n    -70 0z"/> <path d="M2562 1697 c-61 -62 -112 -115 -112 -119 0 -18 208 -108 249 -108 7\r\n    0 11 54 11 164 0 140 -2 165 -16 170 -9 3 -16 6 -17 6 -1 0 -53 -51 -115 -113z"/> <path d="M2933 1803 c-15 -6 -19 -333 -4 -333 46 0 251 88 251 108 0 9 -223\r\n    232 -230 231 -3 0 -11 -3 -17 -6z"/> <path d="M10700 3119 c-390 -84 -696 -376 -797 -759 -31 -117 -41 -292 -24\r\n    -411 33 -227 150 -453 318 -609 267 -250 643 -344 993 -249 117 32 283 118\r\n    380 196 487 396 518 1128 67 1560 -97 93 -166 140 -290 198 -137 64 -235 86\r\n    -407 91 -120 3 -162 0 -240 -17z m445 -313 c238 -81 409 -258 486 -506 30 -96\r\n    33 -289 5 -388 -110 -400 -513 -637 -911 -536 -149 38 -313 147 -402 267 -176\r\n    238 -203 533 -71 797 34 69 60 103 138 180 77 78 111 104 181 139 129 65 207\r\n    81 364 77 109 -3 143 -7 210 -30z"/> <path d="M10703 2700 c-54 -19 -153 -71 -153 -80 0 -3 51 -57 114 -119 80 -80\r\n    119 -112 130 -108 14 5 16 29 16 167 l0 160 -27 -1 c-16 0 -52 -9 -80 -19z"/> <path d="M11020 2561 c0 -139 2 -162 16 -168 22 -8 247 216 234 232 -17 20\r\n    -163 84 -207 91 l-43 7 0 -162z"/> <path d="M10366 2424 c-29 -44 -76 -165 -76 -194 0 -19 7 -20 165 -20 126 0\r\n    165 3 165 13 0 7 -51 63 -114 126 l-114 114 -26 -39z"/> <path d="M11313 2348 c-61 -62 -109 -119 -106 -125 6 -15 333 -19 333 -4 0 45\r\n    -88 241 -108 241 -4 0 -57 -51 -119 -112z"/> <path d="M10882 2338 c-17 -17 -15 -32 7 -52 16 -14 23 -15 41 -6 31 17 24 64\r\n    -10 68 -14 2 -31 -3 -38 -10z"/> <path d="M10846 2159 c-68 -81 17 -194 110 -144 89 48 56 175 -46 175 -30 0\r\n    -44 -6 -64 -31z"/> <path d="M10670 2126 c-19 -23 -8 -61 18 -64 44 -7 67 32 36 62 -19 20 -38 20\r\n    -54 2z"/> <path d="M11106 2127 c-21 -16 -18 -45 7 -61 37 -23 77 35 41 61 -10 7 -21 13\r\n    -24 13 -3 0 -14 -6 -24 -13z"/> <path d="M10290 1970 c0 -29 43 -141 74 -195 l28 -48 116 116 c81 81 113 120\r\n    109 131 -6 14 -29 16 -167 16 -152 0 -160 -1 -160 -20z"/> <path d="M11207 1978 c-3 -7 47 -66 111 -130 l116 -118 27 43 c27 44 79 177\r\n    79 203 0 12 -28 14 -164 14 -122 0 -166 -3 -169 -12z"/> <path d="M10881 1901 c-14 -25 -5 -48 20 -56 27 -9 51 13 47 44 -4 34 -51 43\r\n    -67 12z"/> <path d="M10662 1697 c-61 -62 -112 -115 -112 -119 0 -20 201 -108 247 -108\r\n    10 0 13 34 13 164 0 140 -2 165 -16 170 -9 3 -16 6 -17 6 -1 0 -53 -51 -115\r\n    -113z"/> <path d="M11033 1803 c-10 -3 -13 -47 -13 -169 0 -90 4 -164 8 -164 36 0 186\r\n    61 239 98 16 10 -216 242 -234 235z"/> </g> </svg></td> <td id="winName"></td> <td id="winNum"></td> <td id="winTime"></td> </tr>')}))}(),n=e,document.querySelectorAll("#winPosition")[n].textContent=`${n+1}`,function(t,e){document.querySelectorAll("#car-mini-svg")[t].firstElementChild.style.fill=`${e}`}(e,t.color),function(t,e){document.querySelectorAll("#winName")[t].textContent=`${e}`}(e,t.name),function(t,e){document.querySelectorAll("#winNum")[t].textContent=`${e}`}(e,t.wins),function(t,e){document.querySelectorAll("#winTime")[t].textContent=`${e} sec`}(e,t.time),document.querySelector("#numberwinList").textContent=`Page №${c.winPageNumber+1}`,r=c.winListMemory.length,document.querySelector("#all-winners-number").textContent=`Winners: ${r}`}))}))}var f=function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function c(t){try{s(r.next(t))}catch(t){i(t)}}function o(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,o)}s((r=r.apply(t,e||[])).next())}))};function p(t,e,n){const r=document.querySelector("#win_massage"),a=c.winListMemory.find((e=>String(e.id)===t));let o=Math.ceil(e/1e3);void 0!==a?(a.wins+=1,+o>+a.time&&(o=+a.time),function(t,e,n){f(this,void 0,void 0,(function*(){const r=n,a=Number(e);fetch(`${i.urlPath}${c.showWinners}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({wins:a,time:r})})}))}(a.id,a.wins,o),h()):(function(t,e){f(this,void 0,void 0,(function*(){const n=+t;fetch(`${i.urlPath}${c.showWinners}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n,wins:1,time:e})})}))}(t,o),h()),r.textContent=`THE WINNER IS ${n} WITH ${o} sec`,setTimeout((()=>{r.innerHTML=""}),5e3),i.canWin=!1}var m=function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function c(t){try{s(r.next(t))}catch(t){i(t)}}function o(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,o)}s((r=r.apply(t,e||[])).next())}))};function v(t,e){return m(this,void 0,void 0,(function*(){try{const e=yield fetch(`${i.urlPath}${i.status}${t}${i.drive}`,{method:"PATCH",headers:{"Content-Type":"application/json"}});return(yield e.json()).success}catch(n){return i.raceWidth[e][t]="0",0}}))}function g(t,e){const n=document.querySelectorAll("#car-svg");for(let r=0;r<n.length;r+=1){Object.keys(i.raceWidth[r])[0]===t&&(i.raceWidth[r][t]=""+(document.documentElement.clientWidth-180));let a=0;const c=e/1e3*60,o=(Number(i.raceWidth[r][t])-a)/c;if(n[r].dataset.carId===t){const c=()=>{a+=o,n[r].style.transform=`translateX(${a}px)`,a<Number(i.raceWidth[r][t])?requestAnimationFrame(c):i.canWin&&"0"!==i.raceWidth[r][t]&&p(t,e,n[r].dataset.carName)};c(),v(t,r)}}}function y(t){return m(this,void 0,void 0,(function*(){const e=yield fetch(`${i.urlPath}${i.status}${t}${i.startMovement}`,{method:"PATCH",headers:{"Content-Type":"application/json"}}),n=yield e.json();return Math.ceil(n.distance/n.velocity)}))}function b(t,e){return m(this,void 0,void 0,(function*(){i.canWin=!1;const n=yield fetch(`${i.urlPath}${i.status}${t}${i.stopMovement}`,{method:"PATCH",headers:{"Content-Type":"application/json"}}),r=yield n.json();return i.raceWidth[Number(e)][t]="0",function(t,e){setTimeout((()=>{document.querySelectorAll("#car-svg").forEach(((n,r)=>{const a=n;r===Number(e)&&(a.style.transform="translateX(0px)",i.raceWidth[Number(e)][t]=""+(document.documentElement.clientWidth-180))}))}),1e3)}(t,e),r}))}function w(t){return e=this,n=void 0,a=function*(){const e=yield fetch(`${i.urlPath}${i.allCarGarage}/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});return(yield d()).length||(i.pageNumber-=1),yield function(t){return f(this,void 0,void 0,(function*(){c.winListMemory.find((e=>String(e.id)===t))&&(yield fetch(`${i.urlPath}${c.showWinners}/${t}`,{method:"DELETE"}))}))}(t),yield C(),e},new((r=void 0)||(r=Promise))((function(t,i){function c(t){try{s(a.next(t))}catch(t){i(t)}}function o(t){try{s(a.throw(t))}catch(t){i(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(c,o)}s((a=a.apply(e,n||[])).next())}));var e,n,r,a}function M(){document.querySelector("#car-race").addEventListener("click",(t=>{return e=this,n=void 0,a=function*(){const e=t.target;if("startBtn"===e.id){const t=yield y(e.dataset.carId);g(e.dataset.carId,t),e.classList.remove("activ-change"),e.classList.add("disable-change"),e.nextElementSibling.classList.remove("disable-change"),e.nextElementSibling.classList.add("activ-change")}"stopBtn"===e.id&&(yield b(e.dataset.carId,e.dataset.carIndex),e.classList.remove("activ-change"),e.classList.add("disable-change"),e.previousElementSibling.classList.remove("disable-change"),e.previousElementSibling.classList.add("activ-change")),"delete_button"===e.id&&w(e.dataset.carId),"select_button"===e.id&&function(t,e){const n=document.querySelector("#change-car"),r=document.querySelector("#changeNameCar");n.classList.add("activ-change"),n.dataset.carId=t,r.value=e}(e.dataset.carId,e.dataset.carName)},new((r=void 0)||(r=Promise))((function(t,i){function c(t){try{s(a.next(t))}catch(t){i(t)}}function o(t){try{s(a.throw(t))}catch(t){i(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(c,o)}s((a=a.apply(e,n||[])).next())}));var e,n,r,a}))}function x(){const t=document.querySelector("#newNameCar"),e=document.querySelector("#creating-color");t.value&&(function(t,e){var n,r,a,c;n=this,r=void 0,c=function*(){return fetch(`${i.urlPath}${i.allCarGarage}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:`${t}`,color:`${e}`})})},new((a=void 0)||(a=Promise))((function(t,e){function i(t){try{s(c.next(t))}catch(t){e(t)}}function o(t){try{s(c.throw(t))}catch(t){e(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(i,o)}s((c=c.apply(n,r||[])).next())}))}(t.value,e.value),C())}var S=function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function c(t){try{s(r.next(t))}catch(t){i(t)}}function o(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,o)}s((r=r.apply(t,e||[])).next())}))};function $(){document.querySelector("#change_btn").addEventListener("click",(()=>{!function(){var t,e,n,r;t=this,e=void 0,r=function*(){const t=document.querySelector("#change-car"),e=document.querySelector("#changeNameCar"),n=document.querySelector("#change-color"),r=yield fetch(`${i.urlPath}${i.allCarGarage}/${t.dataset.carId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:`${e.value}`,color:`${n.value}`})});return C(),r},new((n=void 0)||(n=Promise))((function(a,i){function c(t){try{s(r.next(t))}catch(t){i(t)}}function o(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,o)}s((r=r.apply(t,e||[])).next())}))}()}))}function z(){document.querySelector("#creating_btn").addEventListener("click",(()=>{x()})),$(),document.querySelector("#creats100cars").addEventListener("click",(()=>{!function(){const t=new Array(100).fill("");for(let e=0;e<t.length;e+=1){const n=o();t[e]=n,fetch(`${i.urlPath}${i.allCarGarage}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.assign({},t[e]))})}C()}()})),document.querySelector("#race-start").addEventListener("click",(()=>{!function(){i.canWin=!0;const t=i.raceWidth.map(((t,e)=>S(this,void 0,void 0,(function*(){const n=Object.keys(i.raceWidth[e]),r=yield y(n[0]);return g(n[0],r),t}))));Promise.allSettled(t).then((()=>{const t=document.querySelector("#race-start"),e=document.querySelector("#race-stop");t.classList.toggle("disable-change"),e.classList.toggle("disable-change")}))}()})),function(){const t=document.querySelector("#race-start"),e=document.querySelector("#race-stop");e.addEventListener("click",(()=>{!function(){S(this,void 0,void 0,(function*(){i.raceWidth.forEach(((t,e)=>{b(Object.keys(i.raceWidth[e])[0],e.toString())}))}))}(),t.classList.toggle("disable-change"),e.classList.toggle("disable-change")}))}(),function(){const t=document.querySelector("#winners-btn"),e=document.querySelector("#table-section"),n=document.querySelector("#garage-page");t.addEventListener("click",(()=>{n.style.display="none",e.style.display="block"}))}(),function(){const t=document.querySelector("#garage-btn"),e=document.querySelector("#garage-page"),n=document.querySelector("#table-section");t.addEventListener("click",(()=>{e.style.display="block",n.style.display="none"}))}()}function C(){return t=this,e=void 0,r=function*(){yield function(){return l(this,void 0,void 0,(function*(){const t=document.getElementById("body-application");if(null===t)throw new Error("Can't find elment in document");t.innerHTML="",t.insertAdjacentHTML("beforeend",'<section class="select_page"> <h1 class="win_massage" id="win_massage"></h1> <div class="page-button"> <button class="page-button__garage button" id="garage-btn">To Garage</button> <button class="page-button__winlist button" id="winners-btn">To Winners</button> </div> </section> <section class="garage-page" id="garage-page"> <section class="creating_menu container"> <div class="creating-car" id="creating-car"> <input id="newNameCar" type="text"/> <div class="creating-car__color"><input id="creating-color" type="color"/></div> <button id="creating_btn">Creat</button> </div> <div class="change-car" id="change-car"> <input id="changeNameCar" type="text"/> <div class="change-car__color"><input id="change-color" type="color"/></div> <button id="change_btn">Change</button> </div> <div class="race-button"> <button id="race-start" class="button">RACE</button> <button id="race-stop" class="button disable-change">RESET</button> <button id="creats100cars">GENERATION CARS</button> </div> </section> <section class="car-race" id="car-race"> <div class="garage-info" id="garage-info"></div> </section> <section> <div class="numberpage-info" id="numberpage-info">Page ()</div> <button id="prev_page">prev</button> <button id="next_page">next</button> </section> </section> <section class="winners_page" id="winners"> <section class="winners_list" id="winners_list"> <div id="winner_info"></div> <div id="winner_page"></div> </section> <section class="table-section" id="table-section"> <div id="all-winners-number"></div> <table> <thead> <tr> <th>Number</th> <th>Car</th> <th>Name</th> <th class="wins_table" id="wins_counter">Wins <span id="win-arr"></span></th> <th class="time_table activ_filter" id="time_table">Best time <span id="time-arr"></span></th> </tr> </thead> <tbody class="win_table" id="winTable"></tbody> </table> <div class="numberpage-info" id="numberwinList">Page ()</div> <button id="prev_winpage">prev</button> <button id="next_winpage">next</button> </section> </section> ');const e=yield function(){return l(this,void 0,void 0,(function*(){return(yield fetch(`${i.urlPath}${i.allCarGarage}${i.limitCar}1`,{method:"HEAD"})).headers.get("X-Total-Count")}))}();if(null===e)throw new Error("can`t get respons from server =(");!function(t){const e=document.querySelector("#garage-info");e instanceof HTMLElement&&(e.textContent=`In Garage ${t}`)}(e),function(){const t=document.querySelector("#numberpage-info");t&&(t.textContent=`Page №${i.pageNumber+1}`)}()}))}(),yield function(){return s(this,void 0,void 0,(function*(){(yield d()).forEach(((t,e)=>{!function(){const t=document.querySelector("#car-race");if(null===t)throw new Error("Can't find elment in document");t.insertAdjacentHTML("beforeend",'<div class="car_changes"> <button class="car_select button" id="select_button">SELECT</button> <button class="car_remove button" id="delete_button">REMOVE</button> <div class="car_name" id="car-name"></div> </div> <div class="car_control"> <button id="startBtn">A</button> <button id="stopBtn" class="button disable-change">B</button> <div class="distancy"> <div class="car-img"> <svg version="1.0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1280.000000 640.000000" id="car-svg" preserveAspectRatio="xMidYMid meet"> <g transform="translate(0.000000,640.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none"> <path d="M3565 5336 c-106 -30 -101 -26 -108 -111 -4 -42 -9 -80 -12 -85 -6\r\n-10 -246 -105 -590 -234 -448 -167 -1052 -415 -1173 -483 -78 -43 -193 -91\r\n-250 -104 -23 -5 -98 -14 -165 -19 -67 -6 -167 -19 -222 -30 -154 -31 -340\r\n-49 -563 -57 l-203 -6 -43 -66 c-59 -91 -60 -95 -26 -130 37 -37 38 -65 3\r\n-150 -25 -62 -27 -78 -31 -256 l-4 -190 -38 -32 c-91 -78 -133 -209 -134 -418\r\n0 -194 11 -396 26 -482 13 -71 14 -74 72 -122 69 -58 130 -129 158 -184 64\r\n-126 534 -211 1384 -250 l92 -4 -6 119 c-6 142 8 256 49 383 112 352 394 622\r\n756 722 90 26 112 28 278 28 165 0 188 -2 278 -27 201 -56 361 -152 504 -302\r\n140 -145 222 -293 274 -492 21 -79 24 -109 23 -279 -1 -127 -6 -214 -16 -263\r\nl-15 -73 3006 7 c1653 4 3007 8 3009 9 1 1 -8 37 -20 81 -19 67 -22 105 -22\r\n259 -1 166 1 187 27 279 117 421 467 736 885 797 119 17 325 7 432 -21 239\r\n-63 453 -205 601 -399 70 -92 154 -267 185 -386 24 -88 27 -119 27 -260 1\r\n-116 -4 -181 -16 -234 -10 -41 -16 -75 -15 -76 2 -1 62 2 133 6 266 16 458 45\r\n525 79 48 24 97 81 127 146 l24 52 -16 157 c-15 152 -15 163 4 284 63 388 50\r\n680 -35 802 -134 193 -526 336 -1429 519 -737 149 -1322 209 -2033 210 -228 0\r\n-226 0 -347 85 -187 131 -1045 607 -1471 815 -383 187 -788 281 -1439 332\r\n-208 17 -1106 16 -1400 0 -121 -7 -314 -19 -430 -27 -302 -22 -286 -22 -341\r\n10 -140 81 -187 94 -269 71z m1885 -333 c6 -37 38 -238 71 -446 32 -209 66\r\n-422 75 -474 9 -52 15 -96 13 -97 -11 -9 -1699 29 -1951 44 -206 13 -417 36\r\n-485 54 -98 26 -198 119 -249 231 -35 75 -36 172 -5 255 17 45 30 61 68 86 83\r\n54 135 80 253 127 341 136 858 230 1460 267 269 16 270 16 511 18 l227 2 12\r\n-67z m630 47 c264 -18 777 -110 1029 -186 186 -56 445 -188 756 -387 211 -134\r\n274 -181 250 -185 -75 -12 -133 -50 -162 -106 -19 -35 -21 -136 -4 -179 l11\r\n-27 -907 2 -906 3 -59 160 c-110 302 -298 878 -298 916 0 6 95 2 290 -11z"/> <path d="M2633 3125 c-223 -40 -410 -141 -568 -306 -132 -138 -213 -283 -262\r\n-467 -22 -83 -26 -119 -26 -247 -1 -169 10 -236 65 -382 87 -230 271 -436 493\r\n-551 85 -44 178 -78 271 -98 107 -23 312 -23 419 1 392 84 699 375 802 761 23\r\n86 26 120 27 254 1 158 -5 199 -46 330 -98 310 -355 567 -668 669 -150 50\r\n-354 64 -507 36z m350 -301 c249 -56 457 -247 543 -499 25 -72 28 -95 28 -220\r\n1 -153 -15 -228 -74 -345 -94 -186 -283 -337 -485 -386 -96 -24 -268 -24 -360\r\n0 -320 84 -544 355 -562 681 -20 359 209 673 558 765 94 24 253 26 352 4z"/> <path d="M2600 2697 c-36 -13 -85 -36 -109 -51 l-44 -28 116 -115 c81 -82 120\r\n-114 131 -110 14 6 16 29 16 167 0 186 6 178 -110 137z"/> <path d="M2920 2561 c0 -139 2 -162 16 -168 11 -4 50 28 130 108 l115 114 -28\r\n22 c-34 28 -138 70 -193 79 l-40 7 0 -162z"/> <path d="M2282 2448 c-28 -36 -92 -191 -92 -225 0 -10 34 -13 165 -13 151 0\r\n165 1 165 18 0 15 -206 232 -221 232 -4 0 -11 -6 -17 -12z"/> <path d="M3222 2351 c-62 -59 -112 -115 -112 -124 0 -15 17 -17 165 -17 131 0\r\n165 3 165 13 0 40 -69 205 -95 227 -7 6 -48 -27 -123 -99z"/> <path d="M2781 2332 c-12 -22 11 -62 34 -62 8 0 21 10 29 22 20 28 4 58 -29\r\n58 -13 0 -29 -8 -34 -18z"/> <path d="M2749 2161 c-32 -33 -37 -67 -14 -110 29 -57 104 -64 151 -14 53 57\r\n9 153 -71 153 -27 0 -44 -8 -66 -29z"/> <path d="M2570 2125 c-26 -32 13 -81 48 -59 24 16 27 45 6 61 -23 17 -39 16\r\n-54 -2z"/> <path d="M3006 2124 c-20 -19 -20 -38 -2 -54 23 -19 61 -8 64 18 7 44 -32 67\r\n-62 36z"/> <path d="M2190 1975 c0 -29 41 -140 72 -194 l31 -53 117 117 c71 71 116 123\r\n113 131 -4 11 -40 14 -169 14 -141 0 -164 -2 -164 -15z"/> <path d="M3110 1972 c0 -9 51 -68 114 -131 l114 -114 31 54 c30 51 71 165 71\r\n195 0 11 -31 14 -165 14 -151 0 -165 -1 -165 -18z"/> <path d="M2780 1901 c-7 -15 -5 -24 8 -41 32 -40 85 -4 62 41 -14 25 -56 25\r\n-70 0z"/> <path d="M2562 1697 c-61 -62 -112 -115 -112 -119 0 -18 208 -108 249 -108 7\r\n0 11 54 11 164 0 140 -2 165 -16 170 -9 3 -16 6 -17 6 -1 0 -53 -51 -115 -113z"/> <path d="M2933 1803 c-15 -6 -19 -333 -4 -333 46 0 251 88 251 108 0 9 -223\r\n232 -230 231 -3 0 -11 -3 -17 -6z"/> <path d="M10700 3119 c-390 -84 -696 -376 -797 -759 -31 -117 -41 -292 -24\r\n-411 33 -227 150 -453 318 -609 267 -250 643 -344 993 -249 117 32 283 118\r\n380 196 487 396 518 1128 67 1560 -97 93 -166 140 -290 198 -137 64 -235 86\r\n-407 91 -120 3 -162 0 -240 -17z m445 -313 c238 -81 409 -258 486 -506 30 -96\r\n33 -289 5 -388 -110 -400 -513 -637 -911 -536 -149 38 -313 147 -402 267 -176\r\n238 -203 533 -71 797 34 69 60 103 138 180 77 78 111 104 181 139 129 65 207\r\n81 364 77 109 -3 143 -7 210 -30z"/> <path d="M10703 2700 c-54 -19 -153 -71 -153 -80 0 -3 51 -57 114 -119 80 -80\r\n119 -112 130 -108 14 5 16 29 16 167 l0 160 -27 -1 c-16 0 -52 -9 -80 -19z"/> <path d="M11020 2561 c0 -139 2 -162 16 -168 22 -8 247 216 234 232 -17 20\r\n-163 84 -207 91 l-43 7 0 -162z"/> <path d="M10366 2424 c-29 -44 -76 -165 -76 -194 0 -19 7 -20 165 -20 126 0\r\n165 3 165 13 0 7 -51 63 -114 126 l-114 114 -26 -39z"/> <path d="M11313 2348 c-61 -62 -109 -119 -106 -125 6 -15 333 -19 333 -4 0 45\r\n-88 241 -108 241 -4 0 -57 -51 -119 -112z"/> <path d="M10882 2338 c-17 -17 -15 -32 7 -52 16 -14 23 -15 41 -6 31 17 24 64\r\n-10 68 -14 2 -31 -3 -38 -10z"/> <path d="M10846 2159 c-68 -81 17 -194 110 -144 89 48 56 175 -46 175 -30 0\r\n-44 -6 -64 -31z"/> <path d="M10670 2126 c-19 -23 -8 -61 18 -64 44 -7 67 32 36 62 -19 20 -38 20\r\n-54 2z"/> <path d="M11106 2127 c-21 -16 -18 -45 7 -61 37 -23 77 35 41 61 -10 7 -21 13\r\n-24 13 -3 0 -14 -6 -24 -13z"/> <path d="M10290 1970 c0 -29 43 -141 74 -195 l28 -48 116 116 c81 81 113 120\r\n109 131 -6 14 -29 16 -167 16 -152 0 -160 -1 -160 -20z"/> <path d="M11207 1978 c-3 -7 47 -66 111 -130 l116 -118 27 43 c27 44 79 177\r\n79 203 0 12 -28 14 -164 14 -122 0 -166 -3 -169 -12z"/> <path d="M10881 1901 c-14 -25 -5 -48 20 -56 27 -9 51 13 47 44 -4 34 -51 43\r\n-67 12z"/> <path d="M10662 1697 c-61 -62 -112 -115 -112 -119 0 -20 201 -108 247 -108\r\n10 0 13 34 13 164 0 140 -2 165 -16 170 -9 3 -16 6 -17 6 -1 0 -53 -51 -115\r\n-113z"/> <path d="M11033 1803 c-10 -3 -13 -47 -13 -169 0 -90 4 -164 8 -164 36 0 186\r\n61 239 98 16 10 -216 242 -234 235z"/> </g> </svg> </div> <div class="finish-line"></div> </div> </div>')}(),function(t,e,n,r){const a=document.querySelectorAll("#car-svg");a[t].dataset.carId=`${e}`,a[t].dataset.carColor=`${n}`,a[t].dataset.carName=`${r}`,a[t].firstElementChild.style.fill=`${n}`}(e,t.id,t.color,t.name),function(t,e){document.querySelectorAll("#car-name")[t].textContent=`${e}`}(e,t.name),function(t,e,n){const r=document.querySelectorAll("#delete_button"),a=document.querySelectorAll("#select_button"),i=document.querySelectorAll("#startBtn"),c=document.querySelectorAll("#stopBtn");r[t].dataset.carId=`${e}`,a[t].dataset.carId=`${e}`,a[t].dataset.carName=`${n}`,i[t].dataset.carId=`${e}`,c[t].dataset.carId=`${e}`,c[t].dataset.carIndex=`${t}`}(e,t.id,t.name),i.raceWidth[e]={[t.id]:""+(document.documentElement.clientWidth-180)}}))}))}(),M(),function(){const t=document.querySelector("#next_page");if(!(t instanceof HTMLButtonElement))throw new Error("Next button don`t work");t.addEventListener("click",(()=>{Math.ceil(i.carInGarage/7)>i.pageNumber+1&&(i.pageNumber+=1,C())}))}(),function(){const t=document.querySelector("#prev_page");if(!(t instanceof HTMLButtonElement))throw new Error("Next button don`t work");t.addEventListener("click",(()=>{i.pageNumber>0&&(i.pageNumber-=1,C())}))}(),z(),h(),document.querySelector("#prev_winpage").addEventListener("click",(()=>{c.winPageNumber>0&&(c.winPageNumber-=1,h())})),document.querySelector("#next_winpage").addEventListener("click",(()=>{Math.floor(c.maxWinPage/10)>c.winPageNumber&&(c.winPageNumber+=1,h())})),function(){const t=document.querySelector("#wins_counter"),e=document.querySelector("#time_table");t.addEventListener("click",(()=>{t.classList.add("activ_filter"),e.classList.remove("activ_filter"),c.changeFilter="wins",h()}))}(),function(){const t=document.querySelector("#wins_counter"),e=document.querySelector("#time_table");e.addEventListener("click",(()=>{t.classList.remove("activ_filter"),e.classList.add("activ_filter"),c.changeFilter="time",h()}))}()},new((n=void 0)||(n=Promise))((function(a,i){function c(t){try{s(r.next(t))}catch(t){i(t)}}function o(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,o)}s((r=r.apply(t,e||[])).next())}));var t,e,n,r}window.addEventListener("DOMContentLoaded",(()=>{C()}))})()})();